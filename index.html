<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Class 1 EVS ‚Äì Learn & Play</title>
<style>
  :root{
    --bg1:#b3ecff; --bg2:#fef6d8; --card:#ffffff; --ink:#1f2937; --accent:#22c55e; --accent2:#f59e0b; --wrong:#ef4444;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; font-family:system-ui,Segoe UI,Arial; color:var(--ink);
    background: radial-gradient(1200px 800px at 10% 10%, var(--bg1), #e6fff6 40%, var(--bg2));
  }
  .app{
    min-height:100vh; display:flex; flex-direction:column;
  }
  header{
    background:linear-gradient(90deg,#16a34a,#06b6d4);
    color:#fff; padding:14px 18px; display:flex; align-items:center; gap:12px; flex-wrap:wrap;
  }
  header h1{font-size:clamp(20px,3.2vw,28px); margin:0; font-weight:800; letter-spacing:.3px}
  header .crumbs{margin-left:auto; font-size:14px; opacity:.95}
  .wrap{
    flex:1; display:flex; align-items:stretch; justify-content:center; padding:16px;
  }
  .board{
    width:100%; max-width:1100px; background:rgba(255,255,255,.75); backdrop-filter:saturate(160%) blur(6px);
    border-radius:18px; padding:18px; display:grid; grid-template-columns:1fr; gap:16px; box-shadow:0 10px 30px rgba(0,0,0,.08);
  }
  .grid{
    display:grid; gap:16px;
    grid-template-columns: repeat(12, minmax(0,1fr));
  }
  .card{
    background:var(--card); border:2px solid rgba(0,0,0,.06); border-radius:16px; padding:14px; box-shadow:0 4px 14px rgba(0,0,0,.06);
  }
  .menu .tile{
    grid-column: span 6; min-height:170px; display:flex; flex-direction:column; align-items:center; justify-content:center;
    cursor:pointer; transition:.2s transform, .2s box-shadow; text-align:center;
  }
  .menu .tile:hover{transform:translateY(-4px); box-shadow:0 10px 24px rgba(0,0,0,.12)}
  .tile h3{margin:8px 0 0; font-size:clamp(18px,2.6vw,22px)}
  .tile .emoji{font-size:40px}
  @media (max-width:800px){ .menu .tile{grid-column: span 12} }
  .btn{
    appearance:none; border:none; border-radius:12px; padding:12px 16px; font-size:18px; font-weight:700; cursor:pointer;
    background:var(--accent); color:#fff; box-shadow:0 6px 14px rgba(34,197,94,.35); transition:.15s transform;
  }
  .btn.secondary{background:#06b6d4; box-shadow:0 6px 14px rgba(6,182,212,.35)}
  .btn.warn{background:var(--wrong)}
  .btn:active{transform:translateY(1px)}
  .row{display:flex; flex-wrap:wrap; gap:10px; align-items:center}
  .grow{flex:1}
  .bigQ{font-size:clamp(18px,2.8vw,26px); font-weight:800}
  .options{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:10px}
  @media (max-width:640px){ .options{grid-template-columns:1fr} }
  .opt{
    padding:12px; background:#fff; border:2px solid #e5e7eb; border-radius:12px; font-size:18px; cursor:pointer; text-align:center;
  }
  .opt.correct{background:#d1fae5; border-color:#10b981}
  .opt.wrong{background:#fee2e2; border-color:#ef4444}
  .media{
    width:100%; aspect-ratio:16/9; background:#f8fafc; border-radius:12px; overflow:hidden; display:flex; align-items:center; justify-content:center;
  }
  .media img{width:100%; height:100%; object-fit:cover}
  .scorebar{
    display:flex; gap:8px; align-items:center; flex-wrap:wrap; font-weight:700
  }
  .pill{padding:6px 10px; background:#111827; color:#fff; border-radius:999px; font-size:14px}
  .dropzone{
    border:3px dashed #9ca3af; border-radius:14px; padding:14px; min-height:120px; display:flex; gap:10px; flex-wrap:wrap; align-items:flex-start;
    background:#f9fafb;
  }
  .chip{
    padding:8px 12px; border-radius:999px; background:#fff; border:2px solid #d1d5db; cursor:grab; user-select:none;
    font-weight:700
  }
  .zoneTitle{font-weight:800; margin-bottom:6px}
  footer{padding:10px 16px; text-align:center; font-size:13px; color:#4b5563}
  .hidden{display:none !important}
</style>
</head>
<body>
<div class="app">
  <header>
    <div style="font-size:28px">üåø</div>
    <h1>Class 1 EVS ‚Äì Learn & Play</h1>
    <div class="crumbs" id="crumbs">Menu</div>
  </header>

  <div class="wrap">
    <main class="board" id="screen">

      <!-- MENU -->
      <section class="menu" id="menu">
        <div class="grid">
          <div class="card tile" data-chapter="home">
            <div class="emoji">üè†</div>
            <h3>My Home</h3>
            <div>Rooms & parts of a house</div>
          </div>
          <div class="card tile" data-chapter="body">
            <div class="emoji">üë¶</div>
            <h3>My Body</h3>
            <div>Body parts & their uses</div>
          </div>
          <div class="card tile" data-chapter="food">
            <div class="emoji">üçé</div>
            <h3>Kinds of Food</h3>
            <div>Fruits, vegetables & grains</div>
          </div>
          <div class="card tile" data-chapter="health">
            <div class="emoji">üí™</div>
            <h3>Health & Fitness</h3>
            <div>Good habits for kids</div>
          </div>
        </div>
      </section>

      <!-- PLAY AREA -->
      <section id="chapter" class="hidden">
        <div class="row">
          <button class="btn secondary" id="backBtn">‚Üê Back</button>
          <div class="grow"></div>
          <div class="scorebar">
            <span class="pill" id="chapName">Chapter</span>
            <span class="pill" id="scorePill">Score: 0</span>
            <span class="pill" id="taskPill">Task 1/2</span>
          </div>
        </div>

        <!-- MEDIA + QUESTION -->
        <div class="card">
          <div class="media" id="mediaBox"><!-- img goes here --></div>
          <p class="bigQ" id="questionText">Question text‚Ä¶</p>
          <div class="options" id="optionsBox"></div>
        </div>

        <!-- DRAG & DROP AREA (used by some tasks) -->
        <div class="card hidden" id="dragArea">
          <div class="row" style="gap:14px; align-items:flex-start; flex-wrap:wrap">
            <div style="flex:1; min-width:240px">
              <div class="zoneTitle">Items</div>
              <div class="dropzone" id="pool"></div>
            </div>
            <div style="flex:1; min-width:240px">
              <div class="zoneTitle" id="zoneAName">Zone A</div>
              <div class="dropzone" id="zoneA"></div>
            </div>
            <div style="flex:1; min-width:240px">
              <div class="zoneTitle" id="zoneBName">Zone B</div>
              <div class="dropzone" id="zoneB"></div>
            </div>
          </div>
        </div>

        <div class="row">
          <button class="btn" id="nextBtn">Next ‚ñ∂</button>
          <button class="btn" id="checkBtn">Check ‚úÖ</button>
          <button class="btn warn hidden" id="retryBtn">Try Again</button>
        </div>
      </section>

      <!-- END / CELEBRATE -->
      <section id="end" class="hidden">
        <div class="card" style="text-align:center">
          <div style="font-size:64px">üéâ</div>
          <h2 style="margin:.2em 0">Great job!</h2>
          <p id="endSummary">You scored X points.</p>
          <div class="row" style="justify-content:center; gap:12px">
            <button class="btn secondary" id="toMenu">Back to Menu</button>
            <button class="btn" id="replay">Replay Chapter</button>
          </div>
        </div>
      </section>

    </main>
  </div>

  <footer>Made for kids ‚Äî tap the big buttons and learn with pictures!</footer>
</div>

<script>
/* ====== tiny sound effects (no files) ====== */
const beep = (freq=880, dur=0.12) => {
  const ctx = new (window.AudioContext||window.webkitAudioContext)();
  const o = ctx.createOscillator(), g = ctx.createGain();
  o.connect(g); g.connect(ctx.destination);
  o.type="sine"; o.frequency.value=freq;
  g.gain.setValueAtTime(.15, ctx.currentTime);
  g.gain.exponentialRampToValueAtTime(0.001, ctx.currentTime+dur);
  o.start(); o.stop(ctx.currentTime+dur);
};

/* ====== content bank (online images only) ====== */
const bank = {
  home: {
    label: "My Home",
    tasks: [
      { // identify the room
        type:"mcq",
        img:"https://upload.wikimedia.org/wikipedia/commons/1/1f/Modern_living_room.jpg",
        q:"Which room is this?",
        choices:["Bedroom","Kitchen","Living Room"],
        correct:"Living Room"
      },
      { // drag: house parts vs not
        type:"sort",
        titleA:"House Parts",
        titleB:"Not House Parts",
        items:[
          {t:"Roof", group:"A"},
          {t:"Window", group:"A"},
          {t:"Door", group:"A"},
          {t:"Pillow", group:"B"},
          {t:"Plate", group:"B"},
          {t:"Spoon", group:"B"},
        ]
      }
    ]
  },
  body: {
    label:"My Body",
    tasks:[
      {
        type:"mcq",
        img:"https://upload.wikimedia.org/wikipedia/commons/6/6e/Eye_colored_icon.svg",
        q:"What is this body part?",
        choices:["Ear","Eye","Nose"],
        correct:"Eye"
      },
      {
        type:"match", // match part ‚Üí function (implemented as MCQ with picture)
        img:"https://upload.wikimedia.org/wikipedia/commons/0/0e/Ear_anatomy.jpg",
        q:"We hear with our‚Ä¶",
        choices:["Hands","Ears","Feet"],
        correct:"Ears"
      }
    ]
  },
  food: {
    label:"Kinds of Food",
    tasks:[
      {
        type:"mcq",
        img:"https://upload.wikimedia.org/wikipedia/commons/7/7b/Assorted_vegetables.jpg",
        q:"These are mostly‚Ä¶",
        choices:["Vegetables","Fruits","Grains"],
        correct:"Vegetables"
      },
      {
        type:"sort", // healthy vs treat
        titleA:"Healthy Food",
        titleB:"Treat / Sometimes",
        items:[
          {t:"Apple", group:"A"},
          {t:"Carrot", group:"A"},
          {t:"Rice", group:"A"},
          {t:"Chips", group:"B"},
          {t:"Candy", group:"B"},
          {t:"Soda", group:"B"},
        ]
      }
    ]
  },
  health: {
    label:"Health & Fitness",
    tasks:[
      {
        type:"mcq",
        img:"https://upload.wikimedia.org/wikipedia/commons/4/4d/Child_doing_yoga.jpg",
        q:"This activity keeps us‚Ä¶",
        choices:["Healthy","Sleepy","Dirty"],
        correct:"Healthy"
      },
      {
        type:"mcq",
        img:"https://upload.wikimedia.org/wikipedia/commons/e/e0/Boy_drinking_water.jpg",
        q:"Drinking water is a‚Ä¶",
        choices:["Bad Habit","Good Habit","No Habit"],
        correct:"Good Habit"
      }
    ]
  }
};

/* ====== state ====== */
let state = {
  chapterKey:null,
  taskIndex:0,
  score:0
};

/* ====== elements ====== */
const crumbs = document.getElementById('crumbs');
const menuEl = document.getElementById('menu');
const chapterEl = document.getElementById('chapter');
const endEl = document.getElementById('end');

const chapName = document.getElementById('chapName');
const scorePill = document.getElementById('scorePill');
const taskPill = document.getElementById('taskPill');

const mediaBox = document.getElementById('mediaBox');
const questionText = document.getElementById('questionText');
const optionsBox = document.getElementById('optionsBox');

const dragArea = document.getElementById('dragArea');
const pool = document.getElementById('pool');
const zoneA = document.getElementById('zoneA');
const zoneB = document.getElementById('zoneB');
const zoneAName = document.getElementById('zoneAName');
const zoneBName = document.getElementById('zoneBName');

const backBtn = document.getElementById('backBtn');
const nextBtn = document.getElementById('nextBtn');
const checkBtn = document.getElementById('checkBtn');
const retryBtn = document.getElementById('retryBtn');
const endSummary = document.getElementById('endSummary');
const toMenu = document.getElementById('toMenu');
const replay = document.getElementById('replay');

/* ====== helpers ====== */
const show = (el)=>el.classList.remove('hidden');
const hide = (el)=>el.classList.add('hidden');

function setCrumbs(text){ crumbs.textContent = text; }

function shuffle(arr){
  return arr.map(v=>[Math.random(), v]).sort((a,b)=>a[0]-b[0]).map(x=>x[1]);
}

/* ====== renderers ====== */
function renderTask(){
  const chap = bank[state.chapterKey];
  const task = chap.tasks[state.taskIndex];

  chapName.textContent = chap.label;
  scorePill.textContent = `Score: ${state.score}`;
  taskPill.textContent = `Task ${state.taskIndex+1}/${chap.tasks.length}`;
  setCrumbs(`${chap.label} ‚Ä¢ Task ${state.taskIndex+1}`);

  // reset areas
  optionsBox.innerHTML = '';
  mediaBox.innerHTML = '';
  questionText.textContent = '';
  hide(dragArea);
  retryBtn.classList.add('hidden');
  checkBtn.classList.add('hidden');

  if(task.type === 'mcq' || task.type === 'match'){
    if(task.img){
      const img = document.createElement('img');
      img.src = task.img;
      img.alt = "Question image";
      mediaBox.appendChild(img);
    }else{
      mediaBox.textContent = '‚Äî';
    }
    questionText.textContent = task.q;

    const choices = shuffle([...task.choices]);
    choices.forEach(choice=>{
      const btn = document.createElement('button');
      btn.className = 'opt';
      btn.textContent = choice;
      btn.onclick = ()=>{
        // lock all
        [...optionsBox.children].forEach(b=>b.disabled=true);
        if(choice === task.correct){
          btn.classList.add('correct'); state.score++; scorePill.textContent = `Score: ${state.score}`; beep(1000,.12);
        }else{
          btn.classList.add('wrong'); beep(220,.18);
          // show correct
          const c = [...optionsBox.children].find(x=>x.textContent===task.correct);
          if(c) c.classList.add('correct');
        }
      };
      optionsBox.appendChild(btn);
    });
  }

  if(task.type === 'sort'){
    show(dragArea);
    mediaBox.innerHTML = `<div style="padding:8px; text-align:center; font-weight:800">Drag the items into the correct basket</div>`;
    questionText.textContent = 'Sort the items:';
    pool.innerHTML = ''; zoneA.innerHTML=''; zoneB.innerHTML='';
    zoneAName.textContent = task.titleA;
    zoneBName.textContent = task.titleB;

    // create chips
    shuffle(task.items).forEach((it,i)=>{
      const chip = document.createElement('div');
      chip.className = 'chip'; chip.textContent = it.t;
      chip.draggable = true;
      chip.dataset.group = it.group;
      chip.id = 'chip'+i;
      chip.addEventListener('dragstart', e=>{
        e.dataTransfer.setData('text/plain', chip.id);
      });
      pool.appendChild(chip);
    });

    [pool, zoneA, zoneB].forEach(zone=>{
      zone.addEventListener('dragover', e=>{e.preventDefault();});
      zone.addEventListener('drop', e=>{
        e.preventDefault();
        const id = e.dataTransfer.getData('text/plain');
        const el = document.getElementById(id);
        if(el) zone.appendChild(el);
      });
    });

    checkBtn.classList.remove('hidden');
  }
}

/* ====== flow ====== */
function startChapter(key){
  state = {chapterKey:key, taskIndex:0, score:0};
  hide(menuEl); hide(endEl); show(chapterEl);
  renderTask();
}
function nextTask(){
  const chap = bank[state.chapterKey];
  if(state.taskIndex < chap.tasks.length-1){
    state.taskIndex++; renderTask();
  }else{
    // end
    hide(chapterEl); show(endEl);
    setCrumbs(`${bank[state.chapterKey].label} ‚Ä¢ Finished`);
    endSummary.textContent = `You finished ‚Äú${bank[state.chapterKey].label}‚Äù with a score of ${state.score}. Great work!`;
  }
}
function backToMenu(){
  show(menuEl); hide(chapterEl); hide(endEl);
  setCrumbs('Menu');
}

/* ====== checks for drag/sort ====== */
function checkSort(){
  const chap = bank[state.chapterKey];
  const task = chap.tasks[state.taskIndex];
  if(task.type!=='sort') return;
  let ok = true, total = task.items.length, correctCount=0;

  // all chips in zoneA must have group A, zoneB group B; pool is allowed (counts as wrong)
  zoneA.querySelectorAll('.chip').forEach(ch=>{ if(ch.dataset.group==='A') correctCount++; else ok=false; });
  zoneB.querySelectorAll('.chip').forEach(ch=>{ if(ch.dataset.group==='B') correctCount++; else ok=false; });

  if(ok && correctCount===total){
    beep(1000,.15); state.score += 2; scorePill.textContent = `Score: ${state.score}`;
    checkBtn.classList.add('hidden'); retryBtn.classList.add('hidden');
    // brief glow
    [zoneA,zoneB].forEach(z=>z.style.borderColor='#10b981');
    setTimeout(()=>[zoneA,zoneB].forEach(z=>z.style.borderColor='#9ca3af'), 700);
  }else{
    beep(200,.2);
    retryBtn.classList.remove('hidden');
    [zoneA,zoneB].forEach(z=>z.style.borderColor='#ef4444');
    setTimeout(()=>[zoneA,zoneB].forEach(z=>z.style.borderColor='#9ca3af'), 800);
  }
}

/* ====== bind UI ====== */
document.querySelectorAll('.tile').forEach(t=>{
  t.addEventListener('click', ()=>startChapter(t.dataset.chapter));
});
backBtn.addEventListener('click', backToMenu);
nextBtn.addEventListener('click', nextTask);
checkBtn.addEventListener('click', checkSort);
retryBtn.addEventListener('click', ()=>{ renderTask(); });

toMenu.addEventListener('click', backToMenu);
replay.addEventListener('click', ()=>startChapter(state.chapterKey));

/* start at menu */
backToMenu();
</script>
</body>
</html>
